// SPDX-FileCopyrightText: 2025 Paul Debus
//
// SPDX-License-Identifier: GPL-3.0-only

javascript:(()=>{let o=[{name:"Highlight Images",run:function(){document.querySelectorAll("img").forEach(e=>e.style.border="5px solid red")}},{name:"Show Page Title",run:function(){alert("Title: "+document.title)}},{name:"Edit Page Content",run:function(){document.body.contentEditable="true",document.designMode="on"}},{name:"Scroll to Top",run:function(){window.scrollTo(0,0)}},{name:"Scroll to Bottom",run:function(){window.scrollTo(0,document.body.scrollHeight)}}];var n="my-cmd-palette";if(document.getElementById(n))document.getElementById(n).remove();else{let t=[...o],l=0,e=document.createElement("div");e.id=n,e.style.cssText="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.3); z-index: 2147483647; display: flex; justify-content: center; align-items: flex-start; padding-top: 10vh; font-family: sans-serif;";var n=document.createElement("div"),d=(n.style.cssText="width: 500px; max-width: 90%; background: #1e1e1e; border-radius: 8px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); overflow: hidden; display: flex; flex-direction: column; border: 1px solid #333;",document.createElement("input"));d.type="text",d.placeholder="Type to search commands...",d.style.cssText="width: 100%; padding: 15px; font-size: 18px; background: #252526; color: #ddd; border: none; border-bottom: 1px solid #333; outline: none; box-sizing: border-box;";let r=document.createElement("ul");function i(){var e;r.replaceChildren(),0===t.length?((e=document.createElement("div")).innerText="No matching tools",e.style.cssText="padding: 15px; color: #666; text-align: center;",r.appendChild(e)):(t.forEach((e,t)=>{var n=document.createElement("li"),o=(n.innerText=e.name,t===l);n.style.cssText=`
                padding: 10px 15px; 
                cursor: pointer; 
                border-bottom: 1px solid #2d2d2d; 
                background: ${o?"#094771":"transparent"}; 
                color: ${o?"#fff":"#ccc"}; 
                font-size: 14px;
            `,n.onmouseover=function(){l=t,i()},n.onclick=function(){c(e)},r.appendChild(n)}),r.children[l]&&r.children[l].scrollIntoView({block:"nearest"}))}function c(e){try{e.run()}catch(e){alert("Error: "+e)}a()}function a(){document.body.removeChild(e)}r.style.cssText="list-style: none; margin: 0; padding: 0; max-height: 300px; overflow-y: auto;",n.appendChild(d),n.appendChild(r),e.appendChild(n),document.body.appendChild(e),d.focus(),n.onclick=e=>e.stopPropagation(),e.onclick=()=>a(),d.oninput=function(e){let n=e.target.value.toLowerCase().split(" ").filter(e=>0<e.length);t=o.filter(e=>{let t=e.name.toLowerCase();return n.every(e=>t.includes(e))}),l=0,i()},d.onkeydown=function(e){"ArrowDown"===e.key?(e.preventDefault(),l=(l+1)%t.length,i()):"ArrowUp"===e.key?(e.preventDefault(),l=(l-1+t.length)%t.length,i()):"Enter"===e.key?(e.preventDefault(),t[l]&&c(t[l])):"Escape"===e.key&&a()},i()}})();